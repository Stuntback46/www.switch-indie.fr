name: github pages

on:
  push:
    branches:
    - master

jobs:
  build-deploy:
    runs-on: ubuntu-18.04
    steps:
    - uses: actions/checkout@v1.2.0

    - name: Setup Hugo
      uses: peaceiris/actions-hugo@v2.2.2
      with:
        hugo-version: '0.58.3'
        extended: true

    - name: Build
      run: hugo --gc --minify --cleanDestinationDir -e production
    
    - uses: actions-hub/gcloud@master
      env:
        PROJECT_ID: new-test-95a88
        APPLICATION_CREDENTIALS: ${{ewogICJ0eXBlIjogInNlcnZpY2VfYWNjb3VudCIsCiAgInByb2plY3RfaWQiOiAibmV3LXRlc3QtOTVhODgiLAogICJwcml2YXRlX2tleV9pZCI6ICJkNzAxMDE1N2NjZWE4NWVjZDAzMTY1NGI3YWU3MjA4OGFiODFlZWJlIiwKICAicHJpdmF0ZV9rZXkiOiAiLS0tLS1CRUdJTiBQUklWQVRFIEtFWS0tLS0tXG5NSUlFdmdJQkFEQU5CZ2txaGtpRzl3MEJBUUVGQUFTQ0JLZ3dnZ1NrQWdFQUFvSUJBUUN5STZUay9ldjkxZlhnXG5STG1nVTlBNFVhb1ZRYmd1TjlmTTZtMkZSbkZ0dXllQXlkQ29BUGNvUWF4a0hETTRFRkVNb1ZVbkcvZFdzT0oxXG50OWR5Z3NSdldxMlYyZ3Z4Zjd4SEZ6d25hN3NySlF6YlBROFBPdUZCbGpXQmhYdkRnMk4zUW01R0F6aE1DU1paXG41NS9CbzJNVG1jVklGd2NFWUNLSU15WlhJVVgydE4rT3pXRDVDaWg1VTZnaGRiR2pEUDBLN25XMHZiTmxhNDgzXG45REFRa2ZGMnVCZHpRNGN6b3FPRno5T2tmZWhKN0FpS0FjdDFHZ3hkVTUyQytXa0pCdWJLSWJUVnhzeG1JRWVWXG5jUmYrVnZFWHdMOVprSWI1VXNaaWoyeGtOZUpSWXJNYms4aGZ2YXJveTNqRkIxdjAvNDlmL1AxakY1ZkJKdndtXG5kN0V3QkpEckFnTUJBQUVDZ2dFQU1ncmVWeS9YM0RwL2RHMktBZmFaajBDdHVZUDVSQTZPOG5OR3FnSjBlZUZ5XG5BdlZ1eHN0aW95M3p5am03ejd1UnNTMGZPVG5iZlVCNmxadzhDMkNkNHpSRGdFMjlQaTNtaThnRXI0Uk5rNXk0XG5aRnhlUHlhSXdmNTY4SFE1cE41amtreVlvdFZqdXNSMVFCdFgzek5SY1Yrb3NvdzVmZXF0dUxvNXdvOUgwcnBiXG5XSGlpcWVLSVhsaEhnOFVnNWtaNDJuVWFKR2ZJVzFrUGFqUlJkajJ1VmYxdm5rSUZNQW9tZGRhTUlnSkNRcjlqXG41b1RLTXlPbFJXMktBWlFFUVNINmdQN1M0L3VEeGZ1WFJXSVNUQ1doKy9UZi9BaEdSdzl2b1BiNkZldCszN3ljXG5NM2o0NW42Z3ZETlJDVVFlZVpSa2JDUlhSSUp2dTdsRHVCV1V0VVVGMVFLQmdRRHNsRXpqYm9GR2J1YnhmcGxkXG4rZXpWK0lERWdJc0ZkcmNMNEoxR1c0RldFZjErS1JhbWJpeXl1My8rWGpFTEJDZmdOMkpGeXE0b0xmTWhIZlpBXG56WTd1Ymt3dzlqL2ZYTk5MRzZQd2FnWDBlUmpxQ3dSa1JMN2F6VlJ0K1hjeTVHU2NNNnloa2ZGNmNaUWFXK0N1XG5rcitvY2Rwa3dybjRyVGhweUdNcFdPbElWd0tCZ1FEQXd6cTRPaldJUUF3ek5GT3pKZnM1ejJLNFBXSWlTQmhqXG55V3UwcUpHemNtb3B4bWlZSVZXQnhhV0dFOGpVNHoxUGg0c1hyV0tvMjU5QzdobzhLY2N4VHJYRHI3YzFOZmtIXG4xaXphb0IybHRpb0ZSOTZOeFNMRmtWZXQ2aThlTFR6aXhIdjFlQko5aDdwV2RMUTk2U1VabGdkWnMzRFFZOTJQXG5STTJ4cGVadmpRS0JnUUNCd0xTSzZFaXV3SlNaVHIzKzlOd1lYcnNCQ3g4MFYrLzg2NnhXc2trMVU1aWNZUnl6XG5HeW9ZdlExdURXc0loN2IzR21ranJnM21xNHoxVk9HQ21Uc1RPaHMvbjA5WXlpaDR3U2dnNjRWb21DSTUrdURsXG52VzZQd3AzVDAwYTArdDdUYk9QNW1YbS9saHVNZVdlNVYzTVdoNXNvT0VTWFJ5bnhtcDRJUjJOcThRS0JnUUNvXG5NUEJvVktubTQzT0JyaE9tQ2VybHF6Vkk2bzVZdVMxR3pEWEZJUnhZUmVtcDM2dmRxYUF4SmlKaUZac3pYYjllXG5TRGN1QnFSQ0Q3Y3JzQk9HRVRIenJPamVBTkRMaGZkdlJncEhERlF5QmZzdU5tSlNzd0srL2kxUjJ6Y1hqb05FXG5uZ3BHeVdqZ3pPL2loZHZLOVVYZ3lFNUxqMDFORndYMy95RzI4cmxZOVFLQmdHc3pmTU0yOWRQQXF2V2grVGE2XG5yMlpvTWF3K3RnVDAybHJOZWhZRkEzUXFyZlhtWHM2Skl1NTZGM0tFbVBVWmQ5L1J6MW5qTnpEbGZKaXVkM1BWXG5oNWNCaEtZUDM0aFk5MVg0V05odXJ4b3BTQTFEZ1N3MXVETjJrTzhLQU13VUVkelY0aEZBZUQ5SGd3dDlQSG9jXG4xUE5vMnFacXl6QkdQZDZvRkgvZFJncmhcbi0tLS0tRU5EIFBSSVZBVEUgS0VZLS0tLS1cbiIsCiAgImNsaWVudF9lbWFpbCI6ICJyb21haW5AbmV3LXRlc3QtOTVhODguaWFtLmdzZXJ2aWNlYWNjb3VudC5jb20iLAogICJjbGllbnRfaWQiOiAiMTExODc1MjE5MDg1NDg4MDc5NjgxIiwKICAiYXV0aF91cmkiOiAiaHR0cHM6Ly9hY2NvdW50cy5nb29nbGUuY29tL28vb2F1dGgyL2F1dGgiLAogICJ0b2tlbl91cmkiOiAiaHR0cHM6Ly9vYXV0aDIuZ29vZ2xlYXBpcy5jb20vdG9rZW4iLAogICJhdXRoX3Byb3ZpZGVyX3g1MDlfY2VydF91cmwiOiAiaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vb2F1dGgyL3YxL2NlcnRzIiwKICAiY2xpZW50X3g1MDlfY2VydF91cmwiOiAiaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vcm9ib3QvdjEvbWV0YWRhdGEveDUwOS9yb21haW4lNDBuZXctdGVzdC05NWE4OC5pYW0uZ3NlcnZpY2VhY2NvdW50LmNvbSIKfQo=}} 
        CLI: gsutil
      with:
        args: cp -r ./ gs://test-bucket-deploy46/ 
